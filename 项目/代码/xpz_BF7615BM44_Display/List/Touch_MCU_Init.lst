C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE TOUCH_MCU_INIT
OBJECT MODULE PLACED IN .\Output\Touch_MCU_Init.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE BF7615BMXX_XXXX_Library\Touch_MCU_Init.c OMF2 OPTIMIZE(8,SPEED) BROWSE I
                    -NCDIR(.\Application_Library;.\BF7615BMXX_XXXX_Library;.\Code;.\Project) DEBUG PRINT(.\List\Touch_MCU_Init.lst) TABS(2) O
                    -BJECT(.\Output\Touch_MCU_Init.obj)

line level    source

   1          #include ".\BF7615BMXX_XXXX_Library\Config.h"
   2          
   3          //-----------------------------------------------------------------//
   4          //∫Ø ˝√˚≥∆£∫ void CFG_Check(void)
   5          //∫Ø ˝π¶ƒ‹£∫ ≈‰÷√◊÷∂‘±»≈–∂œ(∂‘”¶MCU02–æ∆¨)
   6          // ‰»Î≤Œ ˝£∫ Œﬁ
   7          // ‰≥ˆ≤Œ ˝£∫ Œﬁ
   8          //∑µ ªÿ ÷µ£∫ Œﬁ
   9          //-----------------------------------------------------------------//
  10               
  11          void CFG_Check(void)
  12          {   
  13   1        unsigned char i = 0;
  14   1        unsigned char code add_cfg_Bit[14] = {0x0E,0xFF,0x3F,0xFF,0x3F,0xFF,0x3F,0x1F,0x7E,0xFF,0xFF,0xFF,0x7F,0x
             -07};
  15   1        unsigned int code cfg_addr[14] = {0x81FF,0x41FF,0x41FD,0x41FB,0x41F9,0x41F7,0x41F5,0x41F3,0x41F1,0x41EF,0
             -x81FE,0x81FD,0x41ED,0x41EB};
  16   1        
  17   1        EA = 0;//πÿ◊‹÷–∂œ
  18   1        for(i = 0; i < 14;i++)
  19   1        {
  20   2          SPROG_CMD = 0x88;
  21   2          SPROG_ADDR_H = cfg_addr[i]>>8;
  22   2          SPROG_ADDR_L =  cfg_addr[i];
  23   2          REG_ADDR = i;
  24   2          if((SPROG_RDATA&add_cfg_Bit[i]) != (REG_DATA&add_cfg_Bit[i]))
  25   2          {
  26   3            SOFT_RST = 0x55;  
  27   3          } 
  28   2        }
  29   1        
  30   1        #if SNS_NUM
  31   1          SPROG_CMD = 0x88;
  32   1          SPROG_ADDR_H = 0x41DC>>8;
  33   1          SPROG_ADDR_L = 0x41DC;
  34   1          CFG_Rb = SPROG_RDATA;
  35   1        #endif
  36   1        
  37   1        SPROG_CMD = 0;
  38   1        SPROG_ADDR_H = 0;
  39   1        SPROG_ADDR_L = 0;
  40   1        
  41   1        P2_XH = 0;// π”√MOVX ≤Ÿ◊˜PDATA«¯ ±£¨P2_XH«Â0
  42   1        EA = 1;//ø™◊‹÷–∂œ 
  43   1      }
  44          
  45          
  46          //-----------------------------------------------------------------//
  47          //∫Ø ˝√˚≥∆£∫ void Delay_Us(uint us)
  48          //∫Ø ˝π¶ƒ‹£∫ —” ±Œ™º∏us
  49          // ‰»Î≤Œ ˝£∫ us
  50          // ‰≥ˆ≤Œ ˝£∫ Œﬁ
  51          //∑µ ªÿ ÷µ£∫ Œﬁ
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 2   

  52          //-----------------------------------------------------------------//
  53          #if(DELAY_US_EN == 1)
              #pragma message "±‡“Î£¨void Delay_Us(uint us)"  
              void Delay_Us(uint us)//1--2.38us@12MHz;10-11.8us@12MHz;100-106us@12MHz;1000-1.045ms
              {
                for (; us > 0; us--)
                { 
                  WDT_CTRL = 0x07;
                }   
              }
               
              #endif
  64          //-----------------------------------------------------------------//
  65          //∫Ø ˝√˚≥∆£∫ void Set_Sys_Clk(void)
  66          //∫Ø ˝π¶ƒ‹£∫ œµÕ≥ ±÷”…Ë÷√
  67          // ‰»Î≤Œ ˝£∫ Œﬁ 
  68          // ‰≥ˆ≤Œ ˝£∫ Œﬁ
  69          //∑µ ªÿ ÷µ£∫ Œﬁ
  70          //-----------------------------------------------------------------//
  71          void Set_Sys_Clk(void) 
  72          {
  73   1          SYS_CLK_SET(SYS_CLK);//(SYS_CLK£∫4,5,6,7∑÷±∂‘”¶∫ÍSYSCLK_SEL£∫0--12Mhz,1--08Mhz,2--04Mhz,3--01Mhz)
  74   1          SYS_CLK_ON_OFF(0);//0Œ™ø™œµÕ≥ ±÷”£¨1Œ™πÿœµÕ≥ ±÷” 
  75   1      }
  76           
  77          
  78          //-----------------------------------------------------------------//
  79          //∫Ø ˝√˚≥∆£∫ void Pow_Delay(uint t)
  80          //∫Ø ˝π¶ƒ‹£∫ …œµÁ—” ±∫Ø ˝
  81          // ‰»Î≤Œ ˝£∫ t
  82          // ‰≥ˆ≤Œ ˝£∫ Œﬁ
  83          //∑µ ªÿ ÷µ£∫ Œﬁ
  84          //-----------------------------------------------------------------//
  85          
  86          #if(POW_UP_DELAY == 1)
              #pragma message "±‡“Î£¨void Pow_Up_Delay(uint ms)∫Ø ˝"
              void Pow_Up_Delay(uint ms)//1--1ms@12MHz;10-10.05ms@12MHz;100-100ms@12MHz;1000-1000ms
              {  
                uint a = 954,b = ms;
                #if(SWITCH_TRACEMODE == 0)  
                #pragma message "π§◊˜ƒ£ Ω£¨ø™∆Ù…œµÁ—” ±"
                for (b = ms; b > 0; b--)
                {
                  for (a = 954; a > 0; a--)
                  {
                    WDT_CTRL = 0x07;
                  } 
                } 
                #endif
              }
              #endif
 103          
 104          //-----------------------------------------------------------------//
 105          //∫Ø ˝√˚≥∆£∫ void Delay_Ms(uint t)
 106          //∫Ø ˝π¶ƒ‹£∫ ms—” ±∫Ø ˝
 107          // ‰»Î≤Œ ˝£∫ t
 108          // ‰≥ˆ≤Œ ˝£∫ Œﬁ
 109          //∑µ ªÿ ÷µ£∫ Œﬁ
 110          //-----------------------------------------------------------------//
 111          
 112          #if ((DELAY_MS_EN == 1))
 113          
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 3   

 114          #pragma message "±‡“Î£¨void Delay_Ms(uint ms)∫Ø ˝"
*** MESSAGE C286 IN LINE 114 OF BF7615BMXX_XXXX_Library\Touch_MCU_Init.c: ±‡“Î£¨void Delay_Ms(uint ms)∫Ø 
 115          void Delay_Ms(uint ms)//1--1ms@12MHz;10-10.05ms@12MHz;100-100ms@12MHz;1000-1000ms
 116          {  
 117   1        uint a = 954,b = ms;
 118   1        for (b = ms; b > 0; b--)
 119   1        {
 120   2          for (a = 954; a > 0; a--)
 121   2          {
 122   3            WDT_CTRL = 0x07;
 123   3          } 
 124   2        } 
 125   1      }
 126          #endif
 127          
 128          
 129          
 130          //-----------------------------------------------------------------//
 131          //∫Ø ˝√˚≥∆£∫ void WDT_Init(void)
 132          //∫Ø ˝π¶ƒ‹£∫ ø¥√≈π∑≥ı ºªØ
 133          // ‰»Î≤Œ ˝£∫ Œﬁ
 134          //∑µ ªÿ ÷µ£∫ Œﬁ
 135          //-----------------------------------------------------------------//
 136          void WDT_Init(void)
 137          {
 138   1        #if CHIP_BF7615BMXX_XXXX
 139   1      
 140   1          EA = 0;//πÿ◊‹÷–∂œ£ª
 141   1          WDT_IP_CLR;//…Ë÷√WDT÷–∂œ”≈º∂Œ™µÕ£¨∏˘æ› µº ”¶‘À…Ë÷√”≈œ»º∂
 142   1          WDT_INT_FLAG_CLR;//«Â≥˝ø¥√≈π∑÷–∂œ±Í÷æ
 143   1          WDT_ON_OFF(0);//Ωˆµ»”⁄0x55 ±πÿ±’ø¥√≈π∑
 144   1          WDT_CTRL = 7;//…Ë÷√WDT“Á≥ˆ ±º‰(0~15--18ms~2.304S)7--2.304S
 145   1          WDT_IE_SET; //ø™WDT÷–∂œ πƒ‹
 146   1          EA = 1;//ø™◊‹÷–∂œ 
 147   1      
 148   1        #endif
 149   1      }
 150          
 151          
 152          
 153          
 154          //-----------------------------------------------------------------//
 155          //∫Ø ˝√˚≥∆£∫ void CTK_Init(void)
 156          //∫Ø ˝π¶ƒ‹£∫ CTK≥ı ºªØ
 157          // ‰»Î≤Œ ˝£∫ Œﬁ
 158          //∑µ ªÿ ÷µ£∫ Œﬁ
 159          //-----------------------------------------------------------------//
 160          
 161          void CTK_Init(void)
 162          {
 163   1        #if SNS_NUM
 164   1          #if CHIP_BF7615BMXX_XXXX
 165   1          
 166   1              EA = 0; //πÿ◊‹÷–∂œ
 167   1              //…Ë÷√CTK…®√Ë≤Œ ˝º∞ª˘œﬂ∏¸–¬≤Œ ˝
 168   1              CTK_Set_Para();
 169   1            
 170   1              TRISB |= ((open_sns_l << 2)  & 0xFC);
 171   1              TRISC |= ((open_sns_l >> 2)  & 0x30);
 172   1              TRISE |= ((open_sns_l >> 4)  & 0xF0);
 173   1              TRISF |= ((open_sns_l >> 12) & 0xFF);
 174   1              TRISG |= ((open_sns_l >> 20) & 0x0F);
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 4   

 175   1              TRISH |= ((open_sns_l >> 24) & 0xFF);//…Ë÷√Œ™ ‰»Î
 176   1              
 177   1              TRISA |= ((open_sns_h << 0)  & 0x0F);
 178   1              TRISB |= ((open_sns_h >> 4)  & 0x03);
 179   1              TRISC |= ((open_sns_h >> 6)  & 0x0F);
 180   1              TRISC |= ((open_sns_h >> 4)  & 0xC0);
 181   1              TRISE |= ((open_sns_h >> 12) & 0x0F);//…Ë÷√Œ™ ‰»Î
 182   1              
 183   1      
 184   1              REG_ADDR = 0x26;REG_DATA |= ((open_sns_l)&0xFF);
 185   1              REG_ADDR = 0x27;REG_DATA |= ((open_sns_l>>8)&0xFF);
 186   1              REG_ADDR = 0x28;REG_DATA |= ((open_sns_l>>16)&0xFF);
 187   1              REG_ADDR = 0x29;REG_DATA |= ((open_sns_l>>24)&0xFF);//≈‰÷√IO”ÎSNSπ¶ƒ‹
 188   1              
 189   1              REG_ADDR = 0x51;REG_DATA |= ((open_sns_h)&0xFF);
 190   1              REG_ADDR = 0x52;REG_DATA |= ((open_sns_h>>8)&0xFF);//≈‰÷√IO”ÎSNSπ¶ƒ‹
 191   1          
 192   1              CTK_PRS_SW_SET(0);          //«∞∂À≥‰∑≈µÁø™πÿ,1Œ™πÿ£¨0Œ™ø™
 193   1              CTK_LP_EN_SET(0);           //1£∫CTKƒ£øÈµÕπ¶∫ƒ;0£∫CTKƒ£øÈ’˝≥£ƒ£ Ω
 194   1              CTK_RESO_SET(CTK_RESO);     //0~7 CTKµÁ»›…®√Ë∑÷±Ê¬ £¨º∆ ˝∆˜Œª ˝£∫(CFG_CTK_RESOLUTION+9)Œª°£
 195   1              CTK_PRS_SET(CTK_PRS);       //PRS(≥‰∑≈µÁ∆µ¬ ) = 96/2/(x+8)£ªx = 61 ±£¨PRS(≥‰∑≈µÁ∆µ¬ ) = 400K£ªx = 62/63£¨
             -PRS(≥‰∑≈µÁ∆µ¬ ) = (1~1.5~3)MHz°£
 196   1              CTK_DS_SET(CTK_DS);         //ºÏ≤‚ÀŸ∂»0:24MHz,1:12MHz,2:6MHz,3:4MHz
 197   1              CTK_PAR_SET(Mode);          //0Œ™µ•Õ®µ¿ƒ£ Ω£¨1Œ™∂‡Õ®µ¿≤¢¡™ƒ£ Ω
 198   1              CTK_RB_SET(CTK_RB);         //—°‘ÒRBµÁ◊Ë¥Û–°0:20K,1:40K,2:60K,3:80K,4:150K,5:200K,6:250K,7:300K°£
 199   1              CTK_VTH_SET(CTK_REF);       //0~7 ≤ŒøºµÁ—π(0:1.79V),(1:2.14V),(2:2.47V),(3:2.81V),(4:3.18V),(5:3.48V),(6:
             -3.86V),(7:4.19V);//◊¢£∫VCC-CTK_REF>0.5V
 200   1              CTK_BF7615BMXX_XXXX_Set_Para(pull_i_value[0]);      //…Ë÷√µÁ¡˜‘¥º∂ ˝
 201   1              CTK_PRE_CH_SET(1);          //‘§≥‰µÁ ±º‰£∫0Œ™20us,1Œ™40us
 202   1              CTK_PRE_DISCH_SET(1);       //‘§∑≈µÁ ±º‰£∫0Œ™2us,1Œ™10us
 203   1              CTK_STOP;                   //Õ£÷π…®√Ë
 204   1              CTK_PD_SET(0);              //ø™∆ÙCTK
 205   1      
 206   1              CTK_ADDR_SET(sensor_open[0]);
 207   1              CTK_IP_CLR;//CTK÷–”≈œ»º∂
 208   1              CTK_IE_SET;
 209   1              CTK_START;
 210   1              EA = 1;                     //ø™◊‹÷–∂œ
 211   1      
 212   1          #endif  
 213   1        #endif
 214   1      }
 215          
 216          
 217          
 218          //-----------------------------------------------------------------//
 219          //∫Ø ˝√˚≥∆£∫ void Init_IO(void)
 220          //∫Ø ˝π¶ƒ‹£∫ IOø⁄≥ı ºªØ,Ω´√ª”–”√µΩµƒªÚ–¸ø’µƒIOø⁄£¨…Ë÷√Œ™IO ‰≥ˆŒ™µÕ
 221          // ‰»Î≤Œ ˝£∫ Œﬁ
 222          //∑µ ªÿ ÷µ£∫ Œﬁ
 223          //-----------------------------------------------------------------//
 224          void Init_IO(void)
 225          {
 226   1        #if (TRACEMODE == FALSE) 
 227   1      
 228   1          #if CHIP_BF7615BMXX_XXXX
 229   1          //IOø⁄≥ıªØ
 230   1          //¿˝:SET_PB0_IO_OUT;
 231   1          //¿˝:SET_PB0_H;
 232   1          #endif
 233   1      
 234   1        #endif
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 5   

 235   1      
 236   1        #if (TRACEMODE == TRUE) 
              //    SET_PB3_IO_OUT;
              //    SET_PB3_H;
                #endif
 240   1      }
 241          
 242          //-----------------------------------------------------------------//
 243          //∫Ø ˝√˚≥∆£∫ void Default_Set_IO(void)
 244          //∫Ø ˝π¶ƒ‹£∫ ƒ¨»œIOø⁄…Ë÷√
 245          // ‰»Î≤Œ ˝£∫ Œﬁ
 246          //∑µ ªÿ ÷µ£∫ Œﬁ
 247          //-----------------------------------------------------------------//
 248          void Default_Set_IO(void)
 249          {   
 250   1        #if CHIP_BF7615BMXX_XXXX
 251   1          //…Ë÷√Œ™ ‰≥ˆ£ª
 252   1          //…Ë÷√Œ™…œ¿≠≤ª πƒ‹;
 253   1          //ƒ¨»œPC4/PC5/PE4/PE5ø⁄ø™¬©≤ª πƒ‹£ª
 254   1          //…Ë÷√Œ™ ‰≥ˆµÕ
 255   1          EA = 0;
 256   1        
 257   1          REG_ADDR = 0x17;
 258   1          REG_DATA = 0x00;//PA0_PU_OFF~PA3_PU_OFF
 259   1          DATAA = 0x00;
 260   1          TRISA = 0x00;
 261   1        
 262   1          REG_ADDR = 0x18;
 263   1          REG_DATA = 0x00;//PB0_PU~PB7_PU
 264   1          DATAB = 0x00;
 265   1          TRISB = 0x00;
 266   1        
 267   1          REG_ADDR = 0x19;
 268   1          REG_DATA = 0x00;//PC0_PU~PC7_PU
 269   1          DATAC = 0x00;
 270   1          TRISC = 0x00;
 271   1          
 272   1          REG_ADDR = 0x1B;
 273   1          REG_DATA = 0x00;//PE0_PU~PE7_PU
 274   1          DATAE = 0x00;
 275   1          TRISE = 0x00;
 276   1          
 277   1          REG_ADDR = 0x1C;
 278   1          REG_DATA = 0x00;//PF4_PU~PF7_PU
 279   1          DATAF = 0x00;
 280   1          TRISF = 0x00;
 281   1          
 282   1          REG_ADDR = 0x1D;
 283   1          REG_DATA = 0x00;//PG0_PU~PG7_PU
 284   1          DATAG = 0x00;
 285   1          TRISG = 0x00;
 286   1      
 287   1          REG_ADDR = 0x1E;
 288   1          REG_DATA = 0x00;//PH0_PU~PH7_PU
 289   1          DATAH = 0x00;
 290   1          TRISH = 0x00;
 291   1          
 292   1          EA = 1;
 293   1            
 294   1        #endif
 295   1      }
 296          
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 6   

 297          //-----------------------------------------------------------------//
 298          //∫Ø ˝√˚≥∆£∫ void Trace_Mode_Init(void)
 299          //∫Ø ˝π¶ƒ‹£∫ µ˜ ‘ƒ£ Ω≥ı ºªØ
 300          // ‰»Î≤Œ ˝£∫ Œﬁ
 301          //∑µ ªÿ ÷µ£∫ Œﬁ
 302          //-----------------------------------------------------------------//
 303          
 304          void Trace_Mode_Init(void)
 305          {
 306   1        #if (TRACEMODE == TRUE)
              
                  #if CHIP_BF7615BMXX_XXXX
                      BF7615BMXX_XXXX_Trace_Mode_Init(0x54,1);
                  #endif
              
                #endif
 313   1      
 314   1      }
 315          
 316          
 317          
 318          //-----------------------------------------------------------------//
 319          //∫Ø ˝√˚≥∆£∫ void Function_Init(void)
 320          //∫Ø ˝π¶ƒ‹£∫ π¶ƒ‹ƒ£øÈ≥ı ºªØ
 321          // ‰»Î≤Œ ˝£∫ Œﬁ
 322          //∑µ ªÿ ÷µ£∫ Œﬁ
 323          //-----------------------------------------------------------------//
 324          void Function_Init(void)
 325          {
 326   1      
 327   1      #if (TRACEMODE == TRUE)
              
                #ifdef ADC_IS_OPEN
                  #if ADC_IS_OPEN
                      ADC_Init();
                  #endif
                #endif
                
                #ifdef Timer0_EN
                  #if Timer0_EN
                    Timer0_Init(1000);//∂® ±∆˜0≥ı ºªØ
                  #endif
                #endif
                
                #ifdef UART0_EN
                  #if(UART0_EN == 1)
                    UART0_Init();//UART0_≥ı ºªØ
                  #endif
                #endif
                
                #ifdef UART1_EN
                  #if(UART1_EN == 1)  
                    UART1_Init();//UART1_≥ı ºªØ
                  #endif
                #endif
                
                #ifdef UART2_EN
                  #if(UART2_EN == 1)  
                    UART2_Init();//UART2_≥ı ºªØ
                  #endif
                #endif
                
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 7   

                #ifdef IDLE_MODE
                  #if IDLE_MODE
                    Idle_Wake_Up_Init(3000,7);//–Ë“™…Ë÷√Idle_IO_Init()º∞Idle_IORecovrey()∫Ø ˝
                  #endif
                #endif
                
                #ifdef Timer1_EN
                  #if ((Timer1_EN == 1))
                      Timer1_Init(1000);//∂® ±∆˜1≥ı ºªØ
                  #endif
                #endif
                
                #ifdef Timer2_EN
                  #if Timer2_EN
                    Timer2_Init(1,0);//∂® ±∆˜2≥ı ºªØ
                  #endif
                #endif
                
                #ifdef Timer3_EN
                  #if Timer3_EN
                      Timer3_Init(1000,0);//∂® ±∆˜3≥ı ºªØ
                  #endif
                #endif
                
                #ifdef ExtInt0_EN
                  #if ExtInt0_EN
                    ExtInt0_Init(0,0x001);//Õ‚≤ø÷–∂œ0≥ı ºªØ
                  #endif
                #endif  
                
                #ifdef ExtInt1_EN
                  #if ExtInt1_EN
                    ExtInt1_Init(0);//Õ‚≤ø÷–∂œ1≥ı ºªØ
                  #endif
                #endif
                
                #ifdef ExtInt2_EN
                  #if ExtInt2_EN
                    ExtInt2_Init(0);//Õ‚≤ø÷–∂œ2≥ı ºªØ
                  #endif
                #endif  
                
                #ifdef ExtInt3_EN
                  #if ExtInt3_EN
                    ExtInt3_Init(0);//Õ‚≤ø÷–∂œ3≥ı ºªØ
                  #endif
                #endif  
                
                #ifdef ExtInt4_EN
                  #if ExtInt4_EN
                    ExtInt4_Init(0,0x000000);//0xFFFFFF//Õ‚≤ø÷–∂œ4≥ı ºªØ
                  #endif
                #endif
                
                #ifdef VolDet_EN
                  #if VolDet_EN
                      LVDT_Init();//…˝—π/Ωµ—πºÏ≤‚≥ı ºªØ
                  #endif
                #endif
              
                #ifdef LED_SWITCH_EN
                  #if LED_SWITCH_EN
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 8   

                    #if (LED_SER_ARR_EN == 1)
                      LED_SER_Init();//LED¥Æ––µ„’Û…®√Ë≥ı ºªØ
                    #else
                      LED_ARR_Init();//LED––¡–µ„’Û…®√Ë≥ı ºªØ
                    #endif
                  #endif
                #endif
                
                #ifdef PWM0_EN
                  #if PWM0_EN
                    PWM0_Set(0,4000,0,PWM0_PORT);//PWM0≥ı ºªØ
                  #endif
                #endif
                
                #ifdef PWM1_EN
                  #if PWM1_EN
                    PWM1_Set(0,4000,0,PWM1_PORT);//PWM1≥ı ºªØ
                  #endif
                #endif
                
                #ifdef PWM2_EN
                  #if PWM2_EN
                    PWM2_Set(1,4000,1500);//PWM2≥ı ºªØ
                  #endif
                #endif
                  
                  
                #ifdef PWM3_EN
                  #if PWM3_EN
                    PWM3_Set(0,4000,0);//PWM3≥ı ºªØ
                  #endif
                #endif
                
                #ifdef LCD_EN
                  #if LCD_EN
                      LCD_Init();//LCD≥ı ºªØ
                  #endif
                #endif
                
                #ifdef EEPROM_EN
                  #if (EEPROM_EN == 1)
                    Eeprom_Init();//EEP≥ı ºªØ
                  #endif
                #endif
                
                #ifdef SPI_EN
                  #if (SPI_EN == 1)
                    SPI_Init();//SPI≥ı ºªØ
                  #endif
                #endif
                
              #endif
 473   1      
 474   1      
 475   1      #if (TRACEMODE == FALSE)
 476   1         
 477   1          #ifdef UART0_EN
                    #if(UART0_EN == 1)
                      UART0_Init();//UART0_≥ı ºªØ
                    #endif
                  #endif
 482   1          
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 9   

 483   1          #ifdef UART1_EN
                    #if(UART1_EN == 1)
                      UART1_Init();//UART1_≥ı ºªØ
                    #endif
                  #endif
 488   1          
 489   1          #ifdef UART2_EN
                    #if(UART2_EN == 1)  
                      UART2_Init();//UART2_≥ı ºªØ
                    #endif
                  #endif
 494   1          
 495   1          #ifdef ADC_IS_OPEN
                    #if ADC_IS_OPEN
                      ADC_Init();//ADC≥ı ºªØ
                    #endif
                  #endif
 500   1          
 501   1          #ifdef IDLE_MODE
 502   1            #if IDLE_MODE
                      Idle_Wake_Up_Init(3000,7);//–Ë“™…Ë÷√dle_IO_Init()º∞Idle_IORecovrey()∫Ø ˝£¨≈‰∫œtimer0Ω¯––∂® ± π”√°£
                    #endif
 505   1          #endif
 506   1          
 507   1          #ifdef PWM0_EN
                    #if PWM0_EN
                      PWM0_Set(0,4000,0,PWM0_PORT);//PWM0≥ı ºªØ
                    #endif
                  #endif
 512   1          
 513   1          #ifdef PWM1_EN
                    #if PWM1_EN
                      PWM1_Set(0,4000,0,PWM1_PORT);//PWM1≥ı ºªØ
                    #endif
                  #endif
 518   1          
 519   1          #ifdef PWM2_EN
                    #if PWM2_EN
                      PWM2_Set(0,4000,0);//PWM2≥ı ºªØ
                    #endif
                  #endif
 524   1            
 525   1            
 526   1          #ifdef PWM3_EN
                    #if PWM3_EN
                      PWM3_Set(0,4000,0);//PWM3≥ı ºªØ
                    #endif
                  #endif
 531   1        
 532   1          #ifdef Timer0_EN
 533   1            #if Timer0_EN
 534   1              Timer0_Init(1000);//∂® ±∆˜0≥ı ºªØ
 535   1            #endif
 536   1          #endif
 537   1      
 538   1          #ifdef Timer1_EN
 539   1            #if ((Timer1_EN == 1))
 540   1              Timer1_Init(1000);//∂® ±∆˜1≥ı ºªØ
 541   1            #endif
 542   1          #endif
 543   1          
 544   1          #ifdef Timer2_EN
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 10  

 545   1            #if Timer2_EN
 546   1              Timer2_Init(1,0);//∂® ±∆˜2≥ı ºªØ
 547   1            #endif
 548   1          #endif
 549   1          
 550   1          #ifdef Timer3_EN
 551   1            #if Timer3_EN
                      Timer3_Init(1000,0);//∂® ±∆˜3≥ı ºªØ
                    #endif
 554   1          #endif
 555   1        
 556   1        #ifdef ExtInt0_EN
                  #if ExtInt0_EN
                    ExtInt0_Init(0,0x001);//Õ‚≤ø÷–∂œ0≥ı ºªØ
                  #endif
                #endif  
 561   1        
 562   1        #ifdef ExtInt1_EN
                  #if ExtInt1_EN
                    ExtInt1_Init(0);//Õ‚≤ø÷–∂œ1≥ı ºªØ
                  #endif
                #endif
 567   1        
 568   1        #ifdef ExtInt2_EN
                  #if ExtInt2_EN
                    ExtInt2_Init(0);//Õ‚≤ø÷–∂œ2≥ı ºªØ
                  #endif
                #endif  
 573   1        
 574   1        #ifdef ExtInt3_EN
                  #if ExtInt3_EN
                    ExtInt3_Init(0);//Õ‚≤ø÷–∂œ3≥ı ºªØ
                  #endif
                #endif  
 579   1        
 580   1        #ifdef ExtInt4_EN
                  #if ExtInt4_EN
                    ExtInt4_Init(0,0x000200);//0xFFFFFF//Õ‚≤ø÷–∂œ4≥ı ºªØ
                  #endif
                #endif
 585   1      
 586   1          #ifdef IICS_EN
                    #if ((IICS_EN == 1) && (TRACEMODE == FALSE))
                      IIC_Slave_Init(0XC1,1);//IIC¥”ª˙≥ı ºªØ,0-Œ™—°‘ÒPC4/5Œ™¥Æø⁄£¨1—°‘ÒPE4/5Œ™¥Æø⁄     
                    #endif
                  #endif
 591   1      
 592   1          
 593   1          #ifdef VolDet_EN
 594   1            #if VolDet_EN
 595   1              LVDT_Init();//…˝—π/Ωµ—πºÏ≤‚≥ı ºªØ
 596   1            #endif
 597   1          #endif
 598   1          
 599   1          #ifdef LED_SWITCH_EN
                    #if LED_SWITCH_EN
                      #if (LED_SER_ARR_EN == 1)
                        LED_SER_Init();//LED¥Æ––µ„’Û…®√Ë≥ı ºªØ
                      #else
                        LED_ARR_Init();//LED––¡–µ„’Û…®√Ë≥ı ºªØ
                      #endif
                    #endif
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 11  

                  #endif
 608   1          
 609   1          #ifdef LCD_EN
                    #if LCD_EN
                        LCD_Init();//LCD≥ı ºªØ
                    #endif
                  #endif
 614   1          
 615   1          #ifdef EEPROM_EN
                    #if (EEPROM_EN == 1)
                      Eeprom_Init();//EEP≥ı ºªØ
                    #endif
                  #endif
 620   1          
 621   1          #ifdef SPI_EN
                    #if (SPI_EN == 1)
                      SPI_Init();//SPI≥ı ºªØ
                    #endif
                  #endif
 626   1          
 627   1      #endif
 628   1      }
 629          
 630          //-----------------------------------------------------------------//
 631          //∫Ø ˝√˚≥∆£∫ void MCU_Init(void)
 632          //∫Ø ˝π¶ƒ‹:   MUC≥ı ºªØ
 633          // ‰»Î≤Œ ˝£∫ Œﬁ
 634          //∑µ ªÿ ÷µ£∫ Œﬁ
 635          //-----------------------------------------------------------------//
 636          void MCU_Init(void)
 637          {  
 638   1      
 639   1        BOR_SET(0);//0Œ™ø™µÙµÁ∏¥Œª£¨1πÿµÙµÁ∏¥Œª
 640   1        
 641   1        //ø¥√≈π∑≥ı ºªØ
 642   1        WDT_Init();
 643   1      
 644   1        //≈‰÷√∫Àπ§◊˜ ±÷”
 645   1        Set_Sys_Clk();
 646   1      
 647   1        //≈‰÷√◊÷∂‘±»≈–∂œ
 648   1        CFG_Check();
 649   1      
 650   1        //IOø⁄ƒ¨»œ…Ë÷√
 651   1        Default_Set_IO();
 652   1      
 653   1        //IOø⁄≥ı ºªØ
 654   1        Init_IO();
 655   1      
 656   1        //µ˜ ‘ƒ£ Ω≥ı ºªØ
 657   1        Trace_Mode_Init();
 658   1      
 659   1        //π¶ƒ‹∫Ø ˝≥ı ºªØ
 660   1        Function_Init(); 
 661   1        
 662   1        //CTK≥ı ºªØ 
 663   1        CTK_Init();
 664   1      
 665   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.60.7.0   TOUCH_MCU_INIT                                                    04/11/2024 12:54:17 PAGE 12  

   CODE SIZE        =    774    ----
   CONSTANT SIZE    =     42    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
